{"version":3,"sources":["App.js","index.js"],"names":["App","props","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","state","image","text","imageViewer","lang","status","popout","recognize","bind","assertThisInitialized","imageChange","changeLanguage","e","_this2","setState","currentTarget","value","_this3","preventDefault","target","files","reader","FileReader","onloadend","result","readAsDataURL","_this4","window","Tesseract","progress","react_default","a","createElement","vkui","catch","err","console","error","then","data","finally","title","content","style","maxWidth","maxHeight","alt","src","textAlign","textBlock","renderResultBlock","imageBlock","renderImageBlock","activePanel","id","top","placeholder","onChange","accept","size","before","camera_default","React","Component","connect","send","ReactDOM","render","src_App","document","getElementById"],"mappings":"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","file":"static/js/main.8c75955d.chunk.js","sourcesContent":["import React from 'react';\nimport {Div, File, FormLayout, Group, Panel, PanelHeader, ScreenSpinner, Select, View} from '@vkontakte/vkui';\nimport '@vkontakte/vkui/dist/vkui.css';\nimport Icon24Camera from '@vkontakte/icons/dist/24/camera';\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      image: '',\n      text: '',\n      imageViewer: '',\n      lang: 'rus',\n      status: 'ready',\n      popout: null\n    };\n\n    this.recognize = this.recognize.bind(this);\n    this.imageChange = this.imageChange.bind(this);\n    this.changeLanguage = this.changeLanguage.bind(this);\n  }\n\n  changeLanguage(e) {\n    this.setState({lang: e.currentTarget.value}, () => this.recognize());\n  }\n\n  imageChange(e) {\n    e.preventDefault();\n\n    if (!e.target.files || !e.target.files[0]) {\n      return;\n    }\n\n    let image = e.target.files[0];\n    let reader = new FileReader();\n\n    reader.onloadend = () => {\n      this.setState({\n        image,\n        imageViewer: reader.result,\n      }, () => this.recognize());\n    };\n\n    reader.readAsDataURL(image);\n  }\n\n  recognize() {\n    if (!this.state.image || !this.state.lang) {\n      return;\n    }\n\n    window.Tesseract.recognize(this.state.image, {\n        lang: this.state.lang\n      })\n      .progress(() =>\n        this.setState({\n          popout: <ScreenSpinner/>,\n          status: 'progress',\n          text: ''\n        })\n      )\n      .catch(err => console.error(err))\n      .then(data => {\n        this.setState({\n          text: data.text\n        });\n      })\n      .finally(() => {\n        this.setState({\n          popout: null,\n          status: 'finished'\n        })\n      })\n  }\n\n  renderResultBlock() {\n    let result = this.state.text;\n    if (!this.state.text && this.state.status === 'finished') {\n      result = '–ù–µ —É–¥–∞–ª–æ—Å—å —Ä–∞—Å–ø–æ–∑–Ω–∞—Ç—å —Ç–µ–∫—Å—Ç. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –¥—Ä—É–≥–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ.';\n    }\n\n    if (!result) {\n      return '';\n    }\n\n    return (\n      <Group title=\"–¢–µ–∫—Å—Ç\">\n        <Div>{result}</Div>\n      </Group>\n    );\n  }\n\n  renderImageBlock() {\n    let content = this.state.imageViewer ? (\n      <img style={{\n        maxWidth: '100%',\n        maxHeight: '100%'\n      }} alt=\"–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ\" src={this.state.imageViewer}/>\n    ) : '–ó–∞–≥—Ä—É–∑–∏—Ç–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –¥–ª—è —Ä–∞—Å–ø–æ–∑–Ω–æ–≤–∞–Ω–∏—è —Ç–µ–∫—Å—Ç–∞ üì∑';\n\n    return (<Group title=\"–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ\"> <Div style={{\n      textAlign: 'center',\n    }}>{content}</Div></Group>);\n  }\n\n  render() {\n    let textBlock = this.renderResultBlock();\n    let imageBlock = this.renderImageBlock();\n\n\n    return (\n      <View popout={this.state.popout} activePanel='main_panel'>\n        <Panel id='main_panel'>\n          <PanelHeader>–†–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞</PanelHeader>\n          {imageBlock}\n          {textBlock}\n          <Group title=\"–ù–∞—Å—Ç—Ä–æ–π–∫–∏\">\n            <FormLayout>\n              <Select top=\"–Ø–∑—ã–∫\" status={this.state.lang ? 'valid' : 'error'} placeholder=\"–í—ã–±–µ—Ä–∏—Ç–µ —è–∑—ã–∫\"\n                      value={this.state.lang} onChange={this.changeLanguage}>\n                <option value=\"eng\">–ê–Ω–≥–ª–∏–π—Å–∫–∏–π</option>\n                <option value=\"rus\">–†—É—Å—Å–∫–∏–π</option>\n              </Select>\n              <File top=\"–ó–∞–≥—Ä—É–∑–∏—Ç–µ –≤–∞—à–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ\" accept=\"image/*\" size=\"xl\" before={<Icon24Camera/>}\n                    onChange={this.imageChange}>\n                –û—Ç–∫—Ä—ã—Ç—å –≥–∞–ª–µ—Ä–µ—é\n              </File>\n            </FormLayout>\n          </Group>\n\n        </Panel>\n      </View>\n    );\n  }\n}\n\nexport default App;\n","import 'core-js/es6/map';\nimport 'core-js/es6/set';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport connect from '@vkontakte/vkui-connect';\nimport App from './App';\n\n// Init VK App\nconnect.send('VKWebAppInit', {});\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}